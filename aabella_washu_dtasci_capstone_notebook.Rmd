---
title: "Coursera WashU Dtasci Capstone Project: BLIGHT"
output: github_document
---

Loading libraries
```{r, include=FALSE}
library(readr)
library(magrittr)
library(dplyr)
#install.packages("lucr")
library(lucr)
#install.packages("lubridate")
library(lubridate)
```

Setting data location, make sure the files below are available so the rest runs
```{r}
datadir <- "/Users/toni/Documents/ml_learning/coursera/datasci_RProject/data"
list.files(datadir)
```
Loading blight violation incidents
```{r}
data_violations <- read_csv(paste(datadir, "detroit-blight-violations.csv", sep="/"))
head(data_violations)
```
Loading calls to 311, typically complains
```{r}
data_311 <- read_csv(paste(datadir, "detroit-311.csv", sep="/"))
head(data_311)
```
Loading criminal incidents in Detroit
```{r}
data_crime <- read_csv(paste(datadir, "detroit-crime.csv", sep="/"))
head(data_crime)
```

```{r}
data_permits <- read_tsv(paste(datadir, "detroit-demolition-permits.tsv", sep="/"))
head(data_permits)
```
Data Violation exploration
```{r}
#converting to factors
cols <- c("AgencyName","ViolationCode","Disposition","PaymentStatus","Void",
          "ViolationCategory","Country")
data_violations %<>% mutate_each_(funs(factor(.)),cols)
#converting $$ to numeric
cols <- c("FineAmt","AdminFee","LateFee","StateFee","CleanUpCost","JudgmentAmt")
data_violations %<>% mutate_each_(funs(from_currency(.)),cols)
#converting to dates
cols <-c("TicketIssuedDT","HearingDT")
# to use lubridate, need to figure it out -- 
#data_violations %<>% mutate_each_(funs(from_currency(.)),cols)
str(data_violations)
#summary(data_violations)
```

Violations explorations:
- How many were voided? Should we remove them?
- Map of violations.. potential facets by types
- Types of payment status
- Country? Non-US? 

311 calls exploration:
- 